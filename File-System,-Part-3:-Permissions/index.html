<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  
  <title>File System, Part 3: Permissions - UIUC CS241 SystemProgramming Wiki</title>
  

  <link rel="shortcut icon" href="../img/favicon.ico">

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="../css/highlight.css">

  
  <script>
    // Current page data
    var mkdocs_page_name = "File System, Part 3: Permissions";
    var mkdocs_page_input_path = "File-System,-Part-3:-Permissions.md";
    var mkdocs_page_url = "/File-System,-Part-3:-Permissions/";
  </script>
  
  <script src="../js/jquery-2.1.1.min.js"></script>
  <script src="../js/modernizr-2.8.3.min.js"></script>
  <script type="text/javascript" src="../js/highlight.pack.js"></script>
  <script src="../js/theme.js"></script> 

  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href=".." class="icon icon-home"> UIUC CS241 SystemProgramming Wiki</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        <ul class="current">
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="..">Home</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../#Example Markdown/">#Example Markdown</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../#Informal-Glossary/">#Informal Glossary</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../#Piazza: When And How to Ask For Help/">#Piazza: When And How to Ask For Help</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../C Programming, Part 4: Debugging/">C Programming, Part 4: Debugging</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../C-Programming,-Part-1:-Introduction/">C Programming, Part 1: Introduction</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../C-Programming,-Part-2:-Text-Input-And-Output/">C Programming, Part 2: Text Input And Output</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../C-Programming,-Part-3:-Common-Gotchas/">C Programming, Part 3: Common Gotchas</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../C-Programming:-Review-Questions/">C Programming: Review Questions</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../Deadlock,-Part-1:-Resource-Allocation-Graph/">Deadlock, Part 1: Resource Allocation Graph</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../Deadlock,-Part-2:-Deadlock-Conditions/">Deadlock, Part 2: Deadlock Conditions</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../Exam-Topics/">Exam Topics</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../File-System,-Part-1:-Introduction/">File System, Part 1: Introduction</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../File-System,-Part-2:-Files-are-inodes-(everything-else-is-just-data...)/">File System, Part 2: Files are inodes (everything else is just data...)</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 current">
        <a class="current" href="./">File System, Part 3: Permissions</a>
        
            <ul>
            
                <li class="toctree-l3"><a href="#does-a-directory-have-an-inode-too">Does a directory have an inode too?</a></li>
                
            
                <li class="toctree-l3"><a href="#how-can-i-have-the-same-file-appear-in-two-different-places-in-my-file-system">How can I have the same file appear in two different places in my file system?</a></li>
                
            
                <li class="toctree-l3"><a href="#what-happens-when-i-rm-remove-a-file">What happens when I rm (remove) a file?</a></li>
                
            
                <li class="toctree-l3"><a href="#case-study-back-up-software-that-minimizes-file-duplication">Case study: Back up software that minimizes file duplication</a></li>
                
            
                <li class="toctree-l3"><a href="#can-i-create-hard-links-to-directories-as-well-as-regular-files">Can I create hard links to directories as well as regular files?</a></li>
                
            
                <li class="toctree-l3"><a href="#how-do-i-change-the-permissions-on-a-file">How do I change the permissions on a file?</a></li>
                
            
                <li class="toctree-l3"><a href="#how-do-i-read-the-permission-string-from-ls">How do I read the permission string from ls?</a></li>
                
            
                <li class="toctree-l3"><a href="#what-is-sudo">What is sudo?</a></li>
                
            
                <li class="toctree-l3"><a href="#how-do-i-change-ownership-of-a-file">How do I change ownership of a file?</a></li>
                
            
                <li class="toctree-l3"><a href="#how-do-i-set-permissions-from-code">How do I set permissions from code?</a></li>
                
            
                <li class="toctree-l3"><a href="#why-are-some-files-setuid-what-does-this-mean">Why are some files 'setuid'? What does this mean?</a></li>
                
            
                <li class="toctree-l3"><a href="#why-are-they-useful">Why are they useful?</a></li>
                
            
                <li class="toctree-l3"><a href="#what-permissions-does-sudo-run-as">What permissions does sudo run as ?</a></li>
                
            
                <li class="toctree-l3"><a href="#whats-the-difference-between-getuid-and-geteuid">What's the difference between getuid() and geteuid()?</a></li>
                
            
                <li class="toctree-l3"><a href="#how-do-i-ensure-only-privileged-users-can-run-my-code">How do I ensure only privileged users can run my code?</a></li>
                
            
            </ul>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../File-System,-Part-4:-Working-with-directories/">File System, Part 4: Working with directories</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../File-System,-Part-5:-Virtual-file-systems/">File System, Part 5: Virtual file systems</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../File-System,-Part-6:-Memory-mapped-files-and-Shared-memory/">File System, Part 6: Memory mapped files and Shared memory</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../File-System,-Part-7:-Scalable-and-Reliable-Filesystems/">File System, Part 7: Scalable and Reliable Filesystems</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../File-System,-Part-8:-Disk-blocks-example/">File System, Part 8: Disk blocks example</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../File-System,-Part-8:-Removing-preinstalled-malware-from-an-Android-device/">File System, Part 8: Removing preinstalled malware from an Android device</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../Files,-Part-1:-Working-with-files/">Files, Part 1: Working with files</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../Filesystem:-Review-Questions/">Filesystem: Review Questions</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../Forking,-Part-1:-Introduction/">Forking, Part 1: Introduction</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../Forking,-Part-2:-Fork,-Exec,-Wait/">Forking, Part 2: Fork, Exec, Wait</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../HW0/">HW0</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../Memory,-Part-1:-Heap-Memory-Introduction/">Memory, Part 1: Heap Memory Introduction</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../Memory,-Part-2:-Implementing-a-Memory-Allocator/">Memory, Part 2: Implementing a Memory Allocator</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../Memory,-Part-3:-Smashing-the-Stack-Example/">Memory, Part 3: Smashing the Stack Example</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../Memory:-Review-Questions/">Memory: Review Questions</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../Multi-threaded-Programming:-Review-Questions/">Multi threaded Programming: Review Questions</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../Networking, Part 3: Building a simple TCP Client/">Networking, Part 3: Building a simple TCP Client</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../Networking, Part 6: Creating a UDP server/">Networking, Part 6: Creating a UDP server</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../Networking,-Part-1:-Introduction/">Networking, Part 1: Introduction</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../Networking,-Part-2:-Using-getaddrinfo/">Networking, Part 2: Using getaddrinfo</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../Networking,-Part-4:-Building-a-simple-TCP-Server/">Networking, Part 4: Building a simple TCP Server</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../Networking,-Part-5:-Reusing-ports/">Networking, Part 5: Reusing ports</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../Networking:-Review-Questions/">Networking: Review Questions</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../Nonblocking-I-O,-select(),-and-epoll/">Nonblocking I O, select(), and epoll</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../OSI-Model/">OSI Model</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../POSIX,-Part-1:-Error-handling/">POSIX, Part 1: Error handling</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../Pipe:-Review-Questions/">Pipe: Review Questions</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../Pipes,-Part-1:-Introduction-to-pipes/">Pipes, Part 1: Introduction to pipes</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../Pipes,-Part-2:-Pipe-programming-secrets/">Pipes, Part 2: Pipe programming secrets</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../Process-Control,-Part-1:-Wait-macros,-using-signals/">Process Control, Part 1: Wait macros, using signals</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../Programming-Tricks,-Part-1/">Programming Tricks, Part 1</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../Pthreads,-Part-1:-Introduction/">Pthreads, Part 1: Introduction</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../Pthreads,-Part-2:-Usage-in-Practice/">Pthreads, Part 2: Usage in Practice</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../RPC,-Part-1:-Introduction-to-Remote-Procedure-Calls/">RPC, Part 1: Introduction to Remote Procedure Calls</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../Sample-program-using-pthread-barriers/">Sample program using pthread barriers</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../Scheduling,-Part-1:-Scheduling-Processes/">Scheduling, Part 1: Scheduling Processes</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../Signals,-Part-2:-Pending-Signals-and-Signal-Masks/">Signals, Part 2: Pending Signals and Signal Masks</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../Signals,-Part-3:-Raising-signals/">Signals, Part 3: Raising signals</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../Signals,-Part-4:-Sigaction/">Signals, Part 4: Sigaction</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../Signals:-Review-Questions/">Signals: Review Questions</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../Synchronization,-Part-1:-Mutex-Locks/">Synchronization, Part 1: Mutex Locks</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../Synchronization,-Part-2:-Counting-Semaphores/">Synchronization, Part 2: Counting Semaphores</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../Synchronization,-Part-3:-Working-with-Mutexes-And-Semaphores/">Synchronization, Part 3: Working with Mutexes And Semaphores</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../Synchronization,-Part-4:-The-Critical-Section-Problem/">Synchronization, Part 4: The Critical Section Problem</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../Synchronization,-Part-5:-Condition-Variables/">Synchronization, Part 5: Condition Variables</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../Synchronization,-Part-6:-Implementing-a-barrier/">Synchronization, Part 6: Implementing a barrier</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../Synchronization,-Part-7:-The-Reader-Writer-Problem/">Synchronization, Part 7: The Reader Writer Problem</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../Synchronization,-Part-8:-Ring-Buffer-Example/">Synchronization, Part 8: Ring Buffer Example</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../Synchronization,-Part-9:-The-Reader-Writer-Problem-(part-2)/">Synchronization, Part 9: The Reader Writer Problem (part 2)</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../Synchronization-Concepts:-Review-Questions/">Synchronization Concepts: Review Questions</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../System-Programming-Short-Stories-and-Songs/">System Programming Short Stories and Songs</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../Test-page/">Test page</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../Virtual-Memory,-Part-1:-Introduction-to-Virtual-Memory/">Virtual Memory, Part 1: Introduction to Virtual Memory</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../_Footer/"> Footer</a>
        
    </li>
<li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="..">UIUC CS241 SystemProgramming Wiki</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="..">Docs</a> &raquo;</li>
    
      
    
    <li>File System, Part 3: Permissions</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h2 id="does-a-directory-have-an-inode-too">Does a directory have an inode too?</h2>
<p>Yes! Though a better way to think about this, is that a directory (like a file) <em>is</em> an inode (with some data - the directory name and inode contents). It just happens to be a special kind of inode.</p>
<p>From <a href="http://en.wikipedia.org/wiki/Inode">Wikipedia</a>:</p>
<blockquote>
<p>Unix directories are lists of association structures, each of which contains one filename and one inode number.</p>
</blockquote>
<p>Remember, inodes don't contain filenames--only other file metadata.</p>
<h2 id="how-can-i-have-the-same-file-appear-in-two-different-places-in-my-file-system">How can I have the same file appear in two different places in my file system?</h2>
<p>First remember that a file name != the file. Think of the inode as 'the file' and a directory as just a list of names with each name mapped to an inode number. Some of those inodes may be regular file inodes, others may be directory inodes.</p>
<p>If we already have a file on a file system we can create another link to the same inode using the 'ln' command</p>
<pre><code>$ ln file1.txt blip.txt
</code></pre>

<p>However blip.txt <em>is</em> the same file; if I edit blip I'm editing the same file as 'file1.txt!'
We can prove this by showing that both file names refer to the same inode:</p>
<pre><code>$ ls -i file1.txt blip.txt
134235 file1.txt
134235 blip.txt
</code></pre>

<p>These kinds of links (aka directory entries) are called 'hard links'</p>
<p>The equivalent C call is <code>link</code></p>
<pre><code class="C">link(const char *path1, const char *path2);

link(&quot;file1.txt&quot;, &quot;blip.txt&quot;);
</code></pre>

<p>For simplicity the above examples made hard links inside the same directory however hard links can be created anywhere inside the same filesystem.</p>
<h2 id="what-happens-when-i-rm-remove-a-file">What happens when I <code>rm</code> (remove) a file?</h2>
<p>When you remove a file (using <code>rm</code> or <code>unlink</code>) you are removing an inode reference from a directory.
However the inode may still be referenced from other directories. In order to determine if the contents of the file are still required, each inode keeps a reference count that is updated whenever a new link is created or destroyed.</p>
<h2 id="case-study-back-up-software-that-minimizes-file-duplication">Case study: Back up software that minimizes file duplication</h2>
<p>An example use of hard-links is to efficiently create multiple archives of a file system at different points in time. Once the archive area has a copy of a particular file, then future archives can re-use these archive files rather than creating a duplicate file. Apple's "Time Machine" software does this.</p>
<h2 id="can-i-create-hard-links-to-directories-as-well-as-regular-files">Can I create hard links to directories as well as regular files?</h2>
<p>No. Well yes. Not really... Actually you didn't really want to do this, did you?
The POSIX standard says no you may not! The <code>ln</code> command will only allow root to do this and only if you provide the <code>-d</code> option. However even root may not be able to perform this because most filesystems prevent it! </p>
<p>Why?
The integrity of the file system assumes the directory structure (excluding softlinks which we will talk about later) is a non-cyclic tree that is reachable from the root directory. It becomes expensive to enforce or verify this constraint if directory linking is allowed. Breaking these assumptions can cause file integrity tools to not be able to repair the file system. Recursive searches potentially never terminate and directories can have more than one parent but ".." can only refer to a single parent. All in all, a bad idea.</p>
<h2 id="how-do-i-change-the-permissions-on-a-file">How do I change the permissions on a file?</h2>
<p>Use <code>chmod</code>  (short for "change the file mode bits")</p>
<p>There is a system call, <code>int chmod(const char *path, mode_t mode);</code> but we will concentrate on the shell command. There's two common ways to use <code>chmod</code> ; with an octal value or with a symbolic string:</p>
<pre><code>$ chmod 644 file1
$ chmod 755 file2
$ chmod 700 file3
$ chmod ugo-w file4
$ chmod o-rx file4
</code></pre>

<p>The base-8 ('octal') digits describe the permissions for each role: The user who owns the file, the group and everyone else. The octal number is the sum of three values given to the three types of permission: read(4), write(2), execute(1)</p>
<p>Example: chmod 755 myfile
<em> r + w + x = digit
</em> user has 4+2+1, full permission
<em> group has 4+0+1, read and execute permission
</em> all users have 4+0+1, read and execute permission</p>
<h2 id="how-do-i-read-the-permission-string-from-ls">How do I read the permission string from ls?</h2>
<p>Use `ls -l'. 
Note that the permissions will output in the format 'drwxrwxrwx'. The first character indicates the type of file type. 
Possible values for the first character:
<em> (-) regular file
</em> (d) directory
<em> (c) character device file\
</em> (l) symbolic link
<em> (p) pipe
</em> (b) block device
* (s) socket</p>
<h2 id="what-is-sudo">What is sudo?</h2>
<p>Use <code>sudo</code> to become the admin on the machine.
e.g. Normally (unless explicitly specified in the '/etc/fstab' file, you need root access to mount a filesystem). <code>sudo</code> can be used to temporarily run a command as root (provided the user has sudo privileges)</p>
<pre><code>$ sudo mount /dev/sda2 /stuff/mydisk
$ sudo adduser fred
</code></pre>

<h2 id="how-do-i-change-ownership-of-a-file">How do I change ownership of a file?</h2>
<p>Use <code>chown username filename</code></p>
<h2 id="how-do-i-set-permissions-from-code">How do I set permissions from code?</h2>
<p><code>chmod(const char *path, mode_t mode);</code></p>
<h2 id="why-are-some-files-setuid-what-does-this-mean">Why are some files 'setuid'? What does this mean?</h2>
<p>The set-user-ID-on-execution bit changes the user associated with the process when the file is run. This is typically used for commands that need to run as root but are executed by non-root users. An example of this is <code>sudo</code></p>
<p>The set-group-ID-on-execution changes the group under which the process is run.</p>
<h2 id="why-are-they-useful">Why are they useful?</h2>
<p>The most common usecase is so that the user can have root(admin) access for the duration of the program.</p>
<h2 id="what-permissions-does-sudo-run-as">What permissions does sudo run as ?</h2>
<pre><code>$ ls -l /usr/bin/sudo
-r-s--x--x  1 root  wheel  327920 Oct 24 09:04 /usr/bin/sudo
</code></pre>

<p>The 's' bit means execute and set-uid; the effective userid of the process will be different from the parent process. In this example it will be root</p>
<h2 id="whats-the-difference-between-getuid-and-geteuid">What's the difference between getuid() and geteuid()?</h2>
<ul>
<li><code>getuid</code> returns the real user id (zero if logged in as root)</li>
<li><code>geteuid</code> returns the effective userid (zero if acting as root, e.g. due to the setuid flag set on a program)</li>
</ul>
<h2 id="how-do-i-ensure-only-privileged-users-can-run-my-code">How do I ensure only privileged users can run my code?</h2>
<ul>
<li>Check the effective permissions of the user by calling <code>geteuid()</code>. A return value of zero means the program is running effectively as root.</li>
</ul>
<p><a href="https://github.com/angrave/SystemProgramming/wiki/File-System,-Part-4:-Working-with-directories">Go to File System: Part 4</a></p>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../File-System,-Part-4:-Working-with-directories/" class="btn btn-neutral float-right" title="File System, Part 4: Working with directories">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../File-System,-Part-2:-Files-are-inodes-(everything-else-is-just-data...)/" class="btn btn-neutral" title="File System, Part 2: Files are inodes (everything else is just data...)"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
	  
        </div>
      </div>

    </section>

  </div>

<div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
        <span><a href="../File-System,-Part-2:-Files-are-inodes-(everything-else-is-just-data...)/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../File-System,-Part-4:-Working-with-directories/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>

</body>
</html>
